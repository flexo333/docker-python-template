#!/bin/sh

pip install --no-cache-dir -r /app/requirements.txt

echo Expecting you to run 
echo # docker-compose up www && docker-compose exec /bin/bash
echo # pip 
echo # OR
echo # bundle exec rails s -p 3000 -b '0.0.0.0'

# THIS KEEPS THE CONTAINER RUNNING
# AND GRACEFULLY KILLS IT TOO
trap 'pkill pip && kill -TERM $PID' TERM INT
tail -f /dev/null & 
PID=$!
wait $PID
trap - TERM INT
wait $PID
EXIT_STATUS=$?